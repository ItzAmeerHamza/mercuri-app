(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1525],{65725:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/customers",function(){return n(68683)}])},68683:function(e,t,n){"use strict";n.r(t);var r=n(47568),a=n(26042),s=n(69396),o=n(828),l=n(20414),i=n(85893),u=n(67294),c=n(9008),d=n.n(c),f=n(61953),h=n(36336),p=n(79072),v=n(29630),x=n(54225),m=n(49837),g=n(92383),j=n(18661),b=n(44373),Z=n(67836),w=n(9041);n(45352);var y=n(98875),P=n(31772),C=n(9868),_=n(46723),S=n(84747),A=n(21392),k=n(97169),E=n(2248),I=n(38682),M=n(31644),R=n(41664),L=n.n(R),N=[{label:"All",value:"all"},{label:"Manager",value:"hasAcceptedMarketing"},{label:"Coach",value:"isProspect"},{label:"Coachee",value:"isReturning"},],T=[{label:"Last update (newest)",value:"updatedAt|desc"},{label:"Last update (oldest)",value:"updatedAt|asc"},{label:"Total orders (highest)",value:"totalOrders|desc"},{label:"Total orders (lowest)",value:"totalOrders|asc"},],q=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},z=function(e,t){var n,r,a=(0,o.Z)(t.split("|"),2),s=a[0],l="desc"===(n=a[1])?function(e,t){return q(e,t,s)}:function(e,t){return-q(e,t,s)},i=null==e?void 0:e.map(function(e,t){return[e,t]});return null==i||i.sort(function(e,t){var n=l(e[0],t[0]);return 0!==n?n:e[1]-t[1]}),null==i?void 0:i.map(function(e){return e[0]})},O=function(){var e,t=(0,_.s)(),n=(0,u.useRef)(null),o=(0,u.useState)([]),c=o[0],y=o[1],P=(0,u.useState)("all"),R=P[0],q=P[1],O=(0,u.useState)(0),U=O[0],W=O[1],B=(0,u.useState)(10),D=B[0],F=B[1],G=(0,u.useState)(T[0].value),X=G[0],K=G[1],V=(0,u.useState)(!1),H=V[0],J=V[1],Q=(0,u.useState)({query:"",hasAcceptedMarketing:void 0,isProspect:void 0,isReturning:void 0}),Y=Q[0],$=Q[1];(0,u.useEffect)(function(){I.w.push({event:"page_view"})},[]);var ee=(e=(0,r.Z)(function(){var e;return(0,l.__generator)(this,function(t){switch(t.label){case 0:return e=[],[4,M.U.get("User/getUsersForCompany?companyId=1",{}).then(function(t){e=t.data}).catch(function(e){console.log(e,"error")})];case 1:return t.sent(),[2,e]}})}),function(){return e.apply(this,arguments)}),et=(0,u.useCallback)((0,r.Z)(function(){var e,n;return(0,l.__generator)(this,function(r){switch(r.label){case 0:J(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ee()];case 2:return e=r.sent(),t()&&y(e),[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return J(!1),[2]}})}),[t]);(0,u.useEffect)(function(){et()},[]);var en,er,ea,es,eo,el=function(e,t){var n=(0,s.Z)((0,a.Z)({},Y),{hasAcceptedMarketing:void 0,isProspect:void 0,isReturning:void 0});"all"!==t&&(n[t]=!0),$(n),q(t)},ei=function(e){e.preventDefault(),$(function(e){var t;return(0,s.Z)((0,a.Z)({},e),{query:null===(t=n.current)||void 0===t?void 0:t.value})})},eu=function(e){K(e.target.value)},ec=function(e,t){W(t)},ed=function(e){F(parseInt(e.target.value,10))},ef=null==c?void 0:c.filter(function(e){if(Y.query){var t=!1;if(["email","name"].forEach(function(n){e[n].toLowerCase().includes(Y.query.toLowerCase())&&(t=!0)}),!t)return!1}return(!Y.hasAcceptedMarketing||!!e.hasAcceptedMarketing)&&(!Y.isProspect||!!e.isProspect)&&(!Y.isReturning||!!e.isReturning)}),eh=null==(ea=z(ef,X))?void 0:ea.slice(U*D,U*D+D);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d(),{children:(0,i.jsx)("title",{children:"Dashboard: Customer List | Material Kit Pro"})}),(0,i.jsx)(f.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,i.jsxs)(h.Z,{maxWidth:"xl",children:[(0,i.jsxs)(f.Z,{sx:{mb:4},children:[(0,i.jsxs)(p.ZP,{container:!0,justifyContent:"space-between",spacing:3,children:[(0,i.jsx)(p.ZP,{item:!0,children:(0,i.jsx)(v.Z,{variant:"h4",children:"Customers"})}),(0,i.jsx)(p.ZP,{item:!0,children:(0,i.jsx)(L(),{href:"/dashboard/customers/add",children:(0,i.jsx)(x.Z,{startIcon:(0,i.jsx)(A.v,{fontSize:"small"}),variant:"contained",children:"Add"})})})]}),(0,i.jsxs)(f.Z,{sx:{m:-1,mt:3},children:[(0,i.jsx)(x.Z,{startIcon:(0,i.jsx)(E.g,{fontSize:"small"}),sx:{m:1},children:"Import"}),(0,i.jsx)(x.Z,{startIcon:(0,i.jsx)(S.U,{fontSize:"small"}),sx:{m:1},children:"Export"})]})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(g.Z,{indicatorColor:"primary",onChange:el,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:R,variant:"scrollable",children:N.map(function(e){return(0,i.jsx)(j.Z,{label:e.label,value:e.value},e.value)})}),(0,i.jsx)(b.Z,{}),(0,i.jsxs)(f.Z,{sx:{alignItems:"center",display:"flex",flexWrap:"wrap",m:-1.5,p:3},children:[(0,i.jsx)(f.Z,{component:"form",onSubmit:ei,sx:{flexGrow:1,m:1.5},children:(0,i.jsx)(Z.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:n},InputProps:{startAdornment:(0,i.jsx)(w.Z,{position:"start",children:(0,i.jsx)(k.o,{fontSize:"small"})})},placeholder:"Search customers"})}),(0,i.jsx)(Z.Z,{label:"Sort By",name:"sort",onChange:eu,select:!0,SelectProps:{native:!0},sx:{m:1.5},value:X,children:T.map(function(e){return(0,i.jsx)("option",{value:e.value,children:e.label},e.value)})})]}),(0,i.jsx)(C.g,{customers:eh,customersCount:null==ef?void 0:ef.length,onPageChange:ec,onRowsPerPageChange:ed,rowsPerPage:D,page:U,loading:H})]})]})})]})};O.getLayout=function(e){return(0,i.jsx)(y.a,{children:(0,i.jsx)(P.c,{children:e})})},t.default=O},828:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(13375),a=n(91566);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,a.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[7760,8576,512,7836,6049,539,3837,6755,1557,3958,100,2077,912,4215,8863,6808,9774,2888,179],function(){return e(e.s=65725)}),_N_E=e.O()}]);